(()=>{var e,t,s=null;e=document.getElementById("chart").getContext("2d"),s=new Chart(e,{type:"line",options:{legend:{position:"bottom"},scales:{yAxes:[{ticks:{beginAtZero:!0}}]}}}),t=new URLSearchParams(window.location.search).get("id"),fetch(function(e){return"data/"+e+".data"}(t)).then((function(e){if(!e.ok)throw new Error("HTTP error, status = "+e.status);return e.text().then((function(e){return function(e){show={};var t=e.split("\n");for(var s in t)for(var o in episodes=t[s].split("\t"),season_no=episodes.shift(),episodes)episode_data=episodes[o].split(":"),void 0===show[season_no]&&(show[season_no]=[]),show[season_no].push({id:episode_data[0],score:episode_data[1]});return show}(e)}))})).then((function(e){s.data.datasets=[];var t=0,o=360/Object.keys(e).length;for(var a in e){var n=e[a],r=[];for(var i in n.length>t&&(t=n.length),n){var d=n[i];r.push(d.score)}var l=o*a;s.data.datasets.push({label:"Season "+a,data:r,borderColor:"hsl("+l+",70% ,70%)",fill:!1})}labels=[];for(var h=1;h<=t;h++)labels.push("Episode "+h);s.data.labels=labels,s.update()})).catch((function(e){console.log(e)}))})();